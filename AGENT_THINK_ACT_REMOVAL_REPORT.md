# Agentæ¨¡å¼Think/Actäº‹ä»¶ç§»é™¤æŠ¥å‘Š

## ğŸ“‹ ä¿®æ”¹æ¦‚è¿°

æ ¹æ®åç«¯å·²å°†thinkã€actç±»å‹äº‹ä»¶å½’ä¸ºstepäº‹ä»¶çš„è¦æ±‚ï¼Œå‰ç«¯å·²ç§»é™¤agentæµç¨‹ä¸­çš„thinkã€actç±»å‹å¤„ç†é€»è¾‘ï¼ŒåŒæ—¶ä¿ç•™chatæµç¨‹çš„å¤„ç†åŠŸèƒ½ã€‚

## ğŸ¯ ä¿®æ”¹å†…å®¹

### 1. äº‹ä»¶å¤„ç†é€»è¾‘ä¿®æ”¹

#### ä¸»äº‹ä»¶åˆ†å‘å™¨
```javascript
case 'think':
    // åªåœ¨chatæ¨¡å¼ä¸‹å¤„ç†thinkäº‹ä»¶ï¼Œagentæ¨¡å¼ä¸‹å·²å½’ä¸ºstepäº‹ä»¶
    if (currentMode !== 'agent') {
        handleThinkEvent(event);
    }
    break;
case 'act':
    // åªåœ¨chatæ¨¡å¼ä¸‹å¤„ç†actäº‹ä»¶ï¼Œagentæ¨¡å¼ä¸‹å·²å½’ä¸ºstepäº‹ä»¶
    if (currentMode !== 'agent') {
        handleActEvent(event);
    }
    break;
```

#### Thinkäº‹ä»¶å¤„ç†å‡½æ•°
```javascript
function handleThinkEvent(event) {
    // åªåœ¨chatæ¨¡å¼ä¸‹å¤„ç†thinkäº‹ä»¶
    if (currentMode === 'agent') {
        console.log('âš ï¸ agentæ¨¡å¼ä¸‹thinkäº‹ä»¶å·²å½’ä¸ºstepäº‹ä»¶ï¼Œè·³è¿‡å¤„ç†');
        return;
    }

    // æ·»åŠ æ€è€ƒæ­¥éª¤åˆ°å½“å‰openmanusæ¶ˆæ¯
    addThinkingStepToCurrentMessage(event.result);
    // ä¿å­˜æ€è€ƒæ­¥éª¤åˆ°èŠå¤©å†å²
    chatHistoryManager.addMessage('thinking', event.result);
}
```

#### Actäº‹ä»¶å¤„ç†å‡½æ•°
```javascript
function handleActEvent(event) {
    // åªåœ¨chatæ¨¡å¼ä¸‹å¤„ç†actäº‹ä»¶
    if (currentMode === 'agent') {
        console.log('âš ï¸ agentæ¨¡å¼ä¸‹actäº‹ä»¶å·²å½’ä¸ºstepäº‹ä»¶ï¼Œè·³è¿‡å¤„ç†');
        return;
    }

    // ç›´æ¥æ·»åŠ åˆ°èŠå¤©æ¶ˆæ¯
    addChatMessage(event.result);
    // ä¿å­˜åˆ°èŠå¤©å†å²
    chatHistoryManager.addMessage('manus', event.result);
}
```

### 2. UIç»„ä»¶ä¿®æ”¹

#### äº‹ä»¶å›¾æ ‡å¤„ç†
```javascript
function getEventIcon(eventType) {
    switch (eventType) {
        case 'step':
            return '<i class="bi bi-list-ul"></i>';
        // thinkå’Œactäº‹ä»¶åœ¨agentæ¨¡å¼ä¸‹å·²å½’ä¸ºstepäº‹ä»¶ï¼Œä¸å†å•ç‹¬å¤„ç†
        default:
            return '<i class="bi bi-info-circle"></i>';
    }
}
```

#### CSSæ ·å¼æ¸…ç†
- ç§»é™¤äº†`.sub-event.think`å’Œ`.sub-event.act`çš„æ ·å¼å®šä¹‰
- ç§»é™¤äº†æš—è‰²ä¸»é¢˜ä¸­å¯¹åº”çš„æ ·å¼
- ä¿ç•™äº†`.sub-event.step`çš„æ ·å¼ï¼Œå› ä¸ºstepäº‹ä»¶ä»ç„¶éœ€è¦

### 3. æµ‹è¯•é¡µé¢æ›´æ–°

#### Agentæ¨¡å¼æµ‹è¯•é¡µé¢
- ç§»é™¤äº†"æ¨¡æ‹ŸThinkäº‹ä»¶"å’Œ"æ¨¡æ‹ŸActäº‹ä»¶"æŒ‰é’®
- ç§»é™¤äº†å¯¹åº”çš„æ¨¡æ‹Ÿå‡½æ•°
- ä¿ç•™äº†stepäº‹ä»¶çš„æµ‹è¯•åŠŸèƒ½

#### ä¸‰ä¸ªéƒ¨åˆ†éªŒè¯é¡µé¢
- æ›´æ–°äº†æµ‹è¯•è¯´æ˜ï¼Œæ˜ç¡®think/actå·²å½’ä¸ºstepäº‹ä»¶
- ç§»é™¤äº†thinkå’Œactäº‹ä»¶çš„æµ‹è¯•æµç¨‹
- ä¿ç•™äº†å®Œæ•´çš„stepäº‹ä»¶æµ‹è¯•

## ğŸ”„ å¤„ç†æµç¨‹å˜åŒ–

### Agentæ¨¡å¼ï¼ˆä¿®æ”¹åï¼‰
1. **Planäº‹ä»¶** â†’ æ˜¾ç¤ºè®¡åˆ’å†…å®¹
2. **Step Startäº‹ä»¶** â†’ åˆ›å»ºæ–°æ­¥éª¤
3. **Stepäº‹ä»¶** â†’ æ·»åŠ åˆ°å½“å‰æ­¥éª¤ï¼ˆåŒ…å«åŸæ¥çš„think/actå†…å®¹ï¼‰
4. **Step Finishäº‹ä»¶** â†’ æ ‡è®°æ­¥éª¤å®Œæˆ
5. **Interaction/Completeäº‹ä»¶** â†’ æ˜¾ç¤ºåœ¨èŠå¤©æ¶ˆæ¯ä¸­

### Chatæ¨¡å¼ï¼ˆä¿æŒä¸å˜ï¼‰
1. **Thinkäº‹ä»¶** â†’ æ˜¾ç¤ºåœ¨æ€è€ƒè¿‡ç¨‹åŒºåŸŸ
2. **Actäº‹ä»¶** â†’ æ˜¾ç¤ºåœ¨èŠå¤©æ¶ˆæ¯ä¸­
3. å…¶ä»–äº‹ä»¶å¤„ç†é€»è¾‘ä¿æŒä¸å˜

## âœ… éªŒè¯è¦ç‚¹

### 1. Agentæ¨¡å¼éªŒè¯
- âœ… thinkå’Œactäº‹ä»¶ä¸å†å•ç‹¬å¤„ç†
- âœ… æ‰€æœ‰stepäº‹ä»¶ï¼ˆåŒ…å«åŸthink/actå†…å®¹ï¼‰æ­£ç¡®æ˜¾ç¤ºåœ¨æ­¥éª¤åˆ—è¡¨ä¸­
- âœ… æ­¥éª¤åˆ—è¡¨å±‚çº§ç»“æ„æ­£å¸¸
- âœ… æŠ˜å /å±•å¼€åŠŸèƒ½æ­£å¸¸

### 2. Chatæ¨¡å¼éªŒè¯
- âœ… thinkäº‹ä»¶ä»ç„¶æ˜¾ç¤ºåœ¨æ€è€ƒè¿‡ç¨‹åŒºåŸŸ
- âœ… actäº‹ä»¶ä»ç„¶æ˜¾ç¤ºåœ¨èŠå¤©æ¶ˆæ¯ä¸­
- âœ… æ€è€ƒè¿‡ç¨‹å®¹å™¨æ­£å¸¸å·¥ä½œ
- âœ… å…¶ä»–åŠŸèƒ½ä¸å—å½±å“

### 3. å…¼å®¹æ€§éªŒè¯
- âœ… ç°æœ‰chatæµç¨‹å®Œå…¨ä¸å—å½±å“
- âœ… agentæµç¨‹ç®€åŒ–ï¼Œé€»è¾‘æ›´æ¸…æ™°
- âœ… æµ‹è¯•é¡µé¢æ›´æ–°ï¼ŒéªŒè¯åŠŸèƒ½æ­£å¸¸

## ğŸ“ ä¿®æ”¹æ–‡ä»¶æ¸…å•

### JavaScriptæ–‡ä»¶
- **static/manus-main.js**
  - ä¿®æ”¹äº†äº‹ä»¶åˆ†å‘é€»è¾‘
  - æ›´æ–°äº†handleThinkEventå’ŒhandleActEventå‡½æ•°
  - ç®€åŒ–äº†getEventIconå‡½æ•°

### CSSæ–‡ä»¶
- **static/manus-main.css**
  - ç§»é™¤äº†thinkå’Œactäº‹ä»¶çš„æ ·å¼å®šä¹‰
  - ä¿ç•™äº†stepäº‹ä»¶çš„æ ·å¼

### æµ‹è¯•æ–‡ä»¶
- **test_agent_mode.html**
  - ç§»é™¤äº†thinkå’Œactäº‹ä»¶çš„æµ‹è¯•æŒ‰é’®
  - ç§»é™¤äº†å¯¹åº”çš„æ¨¡æ‹Ÿå‡½æ•°

- **test_three_parts_verification.html**
  - æ›´æ–°äº†æµ‹è¯•è¯´æ˜
  - ç§»é™¤äº†thinkå’Œactäº‹ä»¶çš„æµ‹è¯•æµç¨‹

## ğŸ‰ æ€»ç»“

æœ¬æ¬¡ä¿®æ”¹æˆåŠŸå®ç°äº†ä»¥ä¸‹ç›®æ ‡ï¼š

1. **ç§»é™¤agentæ¨¡å¼ä¸­çš„think/actå¤„ç†**ï¼šåœ¨agentæ¨¡å¼ä¸‹ï¼Œthinkå’Œactäº‹ä»¶ä¸å†å•ç‹¬å¤„ç†ï¼Œå·²å½’ä¸ºstepäº‹ä»¶
2. **ä¿ç•™chatæ¨¡å¼çš„å¤„ç†**ï¼šchatæ¨¡å¼ä¸‹çš„thinkå’Œactäº‹ä»¶å¤„ç†é€»è¾‘å®Œå…¨ä¿æŒä¸å˜
3. **ç®€åŒ–agentæµç¨‹**ï¼šagentæ¨¡å¼çš„äº‹ä»¶å¤„ç†æ›´åŠ ç®€æ´ï¼Œé€»è¾‘æ›´æ¸…æ™°
4. **ä¿æŒå‘åå…¼å®¹**ï¼šç°æœ‰åŠŸèƒ½ä¸å—å½±å“ï¼Œæµ‹è¯•éªŒè¯æ­£å¸¸

æ‰€æœ‰ä¿®æ”¹å·²å®Œæˆå¹¶é€šè¿‡æµ‹è¯•éªŒè¯ï¼Œå¯ä»¥æ­£å¸¸ä½¿ç”¨ï¼
