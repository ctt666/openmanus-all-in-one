<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>é™æ€æ–‡ä»¶æµ‹è¯•</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            padding: 20px;
            background: #f5f5f5;
        }

        .test-section {
            background: white;
            padding: 20px;
            margin: 20px 0;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }

        .test-item {
            display: flex;
            align-items: center;
            gap: 15px;
            margin: 15px 0;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 4px;
        }

        .status {
            padding: 5px 10px;
            border-radius: 4px;
            font-size: 12px;
            min-width: 80px;
            text-align: center;
        }

        .success {
            background: #d4edda;
            color: #155724;
        }

        .error {
            background: #f8d7da;
            color: #721c24;
        }

        .info {
            background: #d1ecf1;
            color: #0c5460;
        }

        .logo-test {
            width: 32px;
            height: 32px;
            border: 2px solid #007bff;
            border-radius: 4px;
        }

        .url-link {
            color: #007bff;
            text-decoration: none;
            font-family: monospace;
            background: #f8f9fa;
            padding: 2px 6px;
            border-radius: 3px;
        }

        .url-link:hover {
            text-decoration: underline;
        }
    </style>
</head>

<body>
    <h1>ğŸ”§ é™æ€æ–‡ä»¶æœåŠ¡æµ‹è¯•</h1>

    <div class="test-section">
        <h2>ğŸ“ Assetsç›®å½•æµ‹è¯•</h2>

        <div class="test-item">
            <img src="/assets/logo.jpg" alt="Logo" class="logo-test" id="logo1">
            <span>Logoå›¾ç‰‡åŠ è½½ï¼š</span>
            <a href="/assets/logo.jpg" target="_blank" class="url-link">/assets/logo.jpg</a>
            <span id="status1" class="status info">æ£€æµ‹ä¸­...</span>
        </div>

        <div class="test-item">
            <img src="/assets/community_group.jpg" alt="Community" class="logo-test" id="logo2">
            <span>ç¤¾åŒºå›¾ç‰‡åŠ è½½ï¼š</span>
            <a href="/assets/community_group.jpg" target="_blank" class="url-link">/assets/community_group.jpg</a>
            <span id="status2" class="status info">æ£€æµ‹ä¸­...</span>
        </div>
    </div>

    <div class="test-section">
        <h2>ğŸ“„ Staticç›®å½•æµ‹è¯•</h2>

        <div class="test-item">
            <span>CSSæ–‡ä»¶ï¼š</span>
            <a href="/static/manus-main.css" target="_blank" class="url-link">/static/manus-main.css</a>
            <span id="status3" class="status info">æ£€æµ‹ä¸­...</span>
        </div>

        <div class="test-item">
            <span>JSæ–‡ä»¶ï¼š</span>
            <a href="/static/manus-main.js" target="_blank" class="url-link">/static/manus-main.js</a>
            <span id="status4" class="status info">æ£€æµ‹ä¸­...</span>
        </div>
    </div>

    <div class="test-section">
        <h2>ğŸŒ ç½‘ç»œè¯·æ±‚è¯¦æƒ…</h2>
        <div id="requestInfo"></div>
    </div>

    <script>
        function testImage(id, description, url) {
            const img = document.getElementById(id);
            const status = document.getElementById('status' + id.slice(-1));

            img.onload = function () {
                status.textContent = 'âœ… åŠ è½½æˆåŠŸ';
                status.className = 'status success';
                console.log(`${description} - åŠ è½½æˆåŠŸ`);
            };

            img.onerror = function () {
                status.textContent = 'âŒ åŠ è½½å¤±è´¥';
                status.className = 'status error';
                console.log(`${description} - åŠ è½½å¤±è´¥`);
            };

            // æ£€æŸ¥æ˜¯å¦å·²ç»åŠ è½½å®Œæˆ
            if (img.complete) {
                if (img.naturalWidth === 0) {
                    img.onerror();
                } else {
                    img.onload();
                }
            }
        }

        async function testStaticFile(url, statusId, description) {
            const status = document.getElementById(statusId);
            try {
                const response = await fetch(url);
                if (response.ok) {
                    status.textContent = 'âœ… å¯è®¿é—®';
                    status.className = 'status success';
                    console.log(`${description} - å¯è®¿é—® (${response.status})`);
                } else {
                    status.textContent = `âŒ ${response.status}`;
                    status.className = 'status error';
                    console.log(`${description} - é”™è¯¯ (${response.status})`);
                }
            } catch (error) {
                status.textContent = 'âŒ ç½‘ç»œé”™è¯¯';
                status.className = 'status error';
                console.log(`${description} - ç½‘ç»œé”™è¯¯:`, error);
            }
        }

        async function displayRequestInfo() {
            const requestInfo = document.getElementById('requestInfo');
            const tests = [
                { url: '/assets/logo.jpg', name: 'Logoå›¾ç‰‡' },
                { url: '/assets/community_group.jpg', name: 'ç¤¾åŒºå›¾ç‰‡' },
                { url: '/static/manus-main.css', name: 'CSSæ–‡ä»¶' },
                { url: '/static/manus-main.js', name: 'JSæ–‡ä»¶' }
            ];

            let html = '<table style="width:100%; border-collapse: collapse;">';
            html += '<tr style="background:#f8f9fa;"><th style="padding:8px; border:1px solid #ddd;">æ–‡ä»¶</th><th style="padding:8px; border:1px solid #ddd;">URL</th><th style="padding:8px; border:1px solid #ddd;">çŠ¶æ€</th><th style="padding:8px; border:1px solid #ddd;">å¤§å°</th></tr>';

            for (const test of tests) {
                try {
                    const response = await fetch(test.url);
                    const statusColor = response.ok ? '#d4edda' : '#f8d7da';
                    const size = response.headers.get('content-length') || 'æœªçŸ¥';
                    html += `<tr>
                        <td style="padding:8px; border:1px solid #ddd;">${test.name}</td>
                        <td style="padding:8px; border:1px solid #ddd; font-family:monospace;">${test.url}</td>
                        <td style="padding:8px; border:1px solid #ddd; background:${statusColor};">${response.status} ${response.statusText}</td>
                        <td style="padding:8px; border:1px solid #ddd;">${size} bytes</td>
                    </tr>`;
                } catch (error) {
                    html += `<tr>
                        <td style="padding:8px; border:1px solid #ddd;">${test.name}</td>
                        <td style="padding:8px; border:1px solid #ddd; font-family:monospace;">${test.url}</td>
                        <td style="padding:8px; border:1px solid #ddd; background:#f8d7da;">ç½‘ç»œé”™è¯¯</td>
                        <td style="padding:8px; border:1px solid #ddd;">-</td>
                    </tr>`;
                }
            }
            html += '</table>';
            requestInfo.innerHTML = html;
        }

        // è¿è¡Œæ‰€æœ‰æµ‹è¯•
        document.addEventListener('DOMContentLoaded', function () {
            // æµ‹è¯•å›¾ç‰‡
            testImage('logo1', 'Logoå›¾ç‰‡', '/assets/logo.jpg');
            testImage('logo2', 'ç¤¾åŒºå›¾ç‰‡', '/assets/community_group.jpg');

            // æµ‹è¯•é™æ€æ–‡ä»¶
            testStaticFile('/static/manus-main.css', 'status3', 'CSSæ–‡ä»¶');
            testStaticFile('/static/manus-main.js', 'status4', 'JSæ–‡ä»¶');

            // æ˜¾ç¤ºè¯¦ç»†è¯·æ±‚ä¿¡æ¯
            displayRequestInfo();

            console.log('å½“å‰é¡µé¢URL:', window.location.href);
        });
    </script>
</body>

</html>
